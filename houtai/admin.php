<?php
//Copyright (c) 2016 iFeiwu.com
 class Admin extends Item { function __construct() { $this->table = "\141\144\155\x69\x6e"; parent::__construct(); } public function postLogin($request_data) { goto L0ems; rgXrr: $admin = $this->db->select($this->table)->where("\x73\x74\141\x74\x65\x20\75\40\x31\x20\101\x4e\104\40\156\x61\155\145\x20\x3d\40\x3f", array($name))->get(); goto SwGPP; PxwbA: $this->_log("\x6c\x6f\147\x69\x6e", array("\141\x64\x6d\x69\x6e\137\151\144" => $admin["\151\144"], "\141\x64\x6d\x69\156\137\x6e\x61\x6d\x65" => $admin["\x6e\x61\x6d\x65"])); goto zXecZ; dgqP_: return $this->error("\347\224\250\346\x88\267\345\x90\x8d\xe6\210\226\xe5\xaf\206\xe7\xa0\201\344\xb8\x8d\xe6\xad\243\347\xa1\256\xef\274\201"); goto H862U; K9Auw: $this->db->update($this->table, array("\152\163\x6f\156" => json_encode($json)), array("\151\144", "\x3d", $admin["\151\x64"])); goto A16dY; GT9hT: $hasher = new PasswordHash(8, false); goto ofAI1; u_Oii: return $this->error("\347\x94\250\xe6\210\xb7\345\x90\x8d\xe6\210\x96\xe5\xaf\206\xe7\240\x81\344\270\x8d\xe6\255\xa3\xe7\xa1\256\xef\274\201"); goto f7Z1g; SwGPP: if ($admin) { goto CkNqy; } goto u_Oii; JpDbE: $json = json_decode($admin["\152\x73\157\x6e"], true); goto kwiln; f7Z1g: CkNqy: goto dLZ8_; L0ems: $name = $request_data["\x6e\x61\x6d\x65"]; goto Jw1h0; Yk3zg: $json["\154\157\147\x69\x6e\137\143\x6f\x75\x6e\x74"] = $json["\x6c\157\x67\x69\156\x5f\143\157\165\156\x74"] + 1; goto K9Auw; kwiln: $json["\x6c\157\147\x69\156\137\164\x69\x6d\145"] = date("\131\x2d\x6d\55\x64\x20\x48\x3a\x69"); goto lE8NK; ofAI1: if ($hasher->CheckPassword($pass, $admin["\160\x61\x73\x73"])) { goto kFW9P; } goto dgqP_; A16dY: $admin["\162\x75\156\164\x69\x6d\x65"] = $this->_runtime(); goto PxwbA; dLZ8_: ifeiwu\Loader::import("\145\170\164\x65\156\144\57\120\141\163\163\167\x6f\x72\144\x48\141\x73\x68"); goto GT9hT; Jw1h0: $pass = $request_data["\x70\x61\x73\163"]; goto rgXrr; lE8NK: $json["\x6c\157\147\x69\156\x5f\151\x70"] = $this->_getIP(); goto Yk3zg; H862U: kFW9P: goto JpDbE; zXecZ: return $this->success($admin); goto UoMbt; UoMbt: } protected function postPassword($id, $request_data) { goto xF0yk; xF0yk: $admin = $this->db->select($this->table)->where("\163\164\141\x74\x65\x20\x3d\40\x31\40\101\x4e\104\x20\x69\144\x20\x3d\40\x3f", array($id))->get(); goto gw2J8; jSo6J: goto r_y3j; goto IkaWp; R9cjE: $data = array("\160\141\x73\163" => $hasher->HashPassword($pass), "\x6a\163\x6f\x6e" => json_encode($json)); goto acsdN; Tka33: $json = json_decode($admin["\x6a\x73\157\156"], true); goto oSCGn; LOaDl: return $this->error("\xe8\257\267\347\xa8\215\345\x80\x99\345\x86\215\xe8\xaf\225\x2e\56\56"); goto jSo6J; IRLxx: $pass = $request_data["\x70\x61\163\x73"]; goto sked4; VeqCE: ATLn5: goto Tka33; Nw2tU: return $this->success("\350\257\267\xe4\xbd\xbf\xe7\x94\xa8\xe6\226\260\xe5\xaf\x86\xe7\240\201\351\x87\215\346\226\260\347\x99\xbb\345\xbd\x95\357\274\201"); goto iAvnS; gw2J8: $old_pass = $request_data["\157\x6c\144\160\x61\x73\163"]; goto IRLxx; sked4: ifeiwu\Loader::extend("\x50\x61\163\x73\167\x6f\162\x64\110\141\x73\x68"); goto BDp4T; luC9P: return $this->error("\346\227\247\345\257\206\xe7\240\201\344\270\x8d\346\255\243\xe7\xa1\xae\xef\xbc\x81"); goto VeqCE; BDp4T: $hasher = new PasswordHash(8, false); goto Uo5cU; acsdN: if ($this->db->update($this->table, $data, array("\x69\144", "\x3d", $id))->is()) { goto iN0iv; } goto LOaDl; Uo5cU: if ($hasher->CheckPassword($old_pass, $admin["\x70\x61\x73\163"])) { goto ATLn5; } goto luC9P; iAvnS: r_y3j: goto f9_j6; IkaWp: iN0iv: goto Nw2tU; oSCGn: $json["\160\141\163\163\x5f\x74\151\x6d\x65"] = time(); goto R9cjE; f9_j6: } protected function postPassword2($request_data) { goto cxF2y; zWqTM: return $this->success(); goto Gyf3E; aGwM_: $hasher = new PasswordHash(8, false); goto n2s8U; YZjNm: rVNIn: goto zWqTM; n2s8U: if ($this->db->update($this->table, array("\x70\141\163\163" => $hasher->HashPassword($pass)), "\x69\144\40\x3d\x20\x31")->is()) { goto rVNIn; } goto bv3dC; cxF2y: $pass = $request_data["\x70\141\x73\x73"]; goto FdY24; Gyf3E: FgpQR: goto isE6t; bv3dC: return $this->error("\xe9\224\x99\xe8\257\xaf\xef\274\x8c\xe8\xaf\xb7\xe7\250\215\345\x80\231\xe5\206\x8d\350\xaf\x95\56\56\56"); goto IagDU; IagDU: goto FgpQR; goto YZjNm; FdY24: ifeiwu\Loader::extend("\120\x61\163\x73\x77\x6f\162\144\110\141\163\x68"); goto aGwM_; isE6t: } protected function postAdd($request_data) { goto YTcaV; zMrtI: $hasher = new PasswordHash(8, false); goto vQE_4; h0khV: if ($this->db->insert($this->table, $data)->is()) { goto WbErE; } goto rwziK; Ka1tN: $data["\163\164\x61\164\145"] = $request_data["\163\164\141\164\x65"] ?: 0; goto N3pSQ; vQE_4: $data["\156\x61\x6d\x65"] = $request_data["\156\141\x6d\145"]; goto EDIiV; Bx6OY: $data["\143\164\x69\155\145"] = time(); goto h0khV; EbTqw: $data["\152\163\x6f\x6e"] = json_encode(array("\154\x61\163\164\137\164\151\x6d\145" => "\x2d\x2d\x2d\55\x2d", "\x6c\141\x73\x74\x5f\x69\x70" => "\x30\x2e\x30\56\x30\x2e\60", "\x6c\x6f\x67\x69\x6e\x5f\x63\x6f\165\156\x74" => 0)); goto Bx6OY; fkeYm: WbErE: goto Vk4KN; VGUNX: return $this->success(); goto fW7Zz; urQlG: goto Z6L32; goto fkeYm; N3pSQ: $data["\x72\142\x61\143"] = $request_data["\x72\x62\141\143"] ?: "\x6e\x6f\162\x6d\x61\154"; goto EbTqw; YTcaV: ifeiwu\Loader::import("\x65\170\164\x65\156\144\x2f\120\141\163\163\x77\x6f\x72\144\x48\141\163\x68"); goto zMrtI; rwziK: return $this->error("\xe5\xb8\x90\xe5\x8f\xb7\345\267\xb2\345\255\x98\xe5\234\250\357\274\x81"); goto urQlG; fW7Zz: Z6L32: goto gU9XK; EDIiV: $data["\x70\141\163\x73"] = $hasher->HashPassword($request_data["\x70\141\x73\x73"]); goto Ka1tN; Vk4KN: $this->_log("\141\x64\x64", array("\x74\151\x74\x6c\x65" => $data["\156\141\155\145"])); goto VGUNX; gU9XK: } protected function postUpdate($id, $request_data) { goto MBWkY; F3nwB: O__7u: goto r0_wN; XucmW: $data["\x61\144\144\x72\145\x73\x73"] = $request_data["\141\x64\144\162\145\x73\x73"]; goto eMSIv; CRYnV: if (!isset($request_data["\160\141\163\163"])) { goto EZZH9; } goto gh_z8; G4As5: return $this->error("\350\xaf\267\xe7\250\215\xe5\200\x99\345\206\215\350\xaf\x95\56\x2e\56"); goto q35Gl; tAfVg: $this->_log("\165\160\x64\141\x74\x65", array("\164\151\164\154\145" => $data["\x6e\x61\x6d\145"])); goto cRuV5; cRuV5: return $this->success(); goto tYL1g; pNzyy: $data["\x72\142\x61\143"] = $request_data["\162\x62\141\x63"]; goto PyV3r; w3ZHI: $data["\162\145\141\x6c\156\141\x6d\x65"] = $request_data["\x72\x65\141\x6c\156\x61\x6d\145"]; goto XucmW; q35Gl: goto oNzow; goto TVGdH; H01Xp: H0MvR: goto L6vra; ikL1Q: $hasher = new PasswordHash(8, false); goto IiEC8; IiEC8: if (!isset($request_data["\156\141\x6d\x65"])) { goto O__7u; } goto fdOzj; c59HW: $data["\163\145\170"] = $request_data["\163\145\x78"]; goto Ry9_0; tYL1g: oNzow: goto YPD0e; TVGdH: H_Eeg: goto tAfVg; PyV3r: mUIZ0: goto CRYnV; c0VzZ: $data["\163\x74\141\164\145"] = $request_data["\x73\164\141\164\x65"]; goto H01Xp; fdOzj: $data["\156\141\155\145"] = $request_data["\x6e\141\x6d\x65"]; goto F3nwB; L6vra: if (!isset($request_data["\162\142\x61\x63"])) { goto mUIZ0; } goto pNzyy; gh_z8: $data["\160\x61\x73\x73"] = $hasher->HashPassword($request_data["\160\x61\163\163"]); goto IoU2w; IoU2w: EZZH9: goto w3ZHI; nFgLA: $data["\x71\x71"] = $request_data["\161\161"]; goto c59HW; eMSIv: $data["\x6d\157\142\x69\x6c\x65"] = $request_data["\x6d\x6f\x62\151\154\145"]; goto VXUEG; r0_wN: if (!isset($request_data["\x73\x74\x61\164\145"])) { goto H0MvR; } goto c0VzZ; Ry9_0: $data["\165\164\x69\x6d\145"] = time(); goto G_FTN; VXUEG: $data["\151\156\x74\x72\x6f"] = $request_data["\151\x6e\164\162\x6f"]; goto nFgLA; MBWkY: ifeiwu\Loader::import("\x65\170\x74\145\x6e\x64\x2f\120\141\163\x73\167\x6f\x72\x64\110\x61\x73\x68"); goto ikL1Q; G_FTN: if ($this->db->update($this->table, $data, array("\x69\x64", "\x3d", $id))->is()) { goto H_Eeg; } goto G4As5; YPD0e: } protected function postDelete($request_data) { goto ClAGR; ClAGR: $ids = $request_data["\x69\x64"]; goto osSAx; osSAx: foreach ($ids as $id) { $this->db->delete($this->table, array("\151\144", "\x3d", $id)); bkRdI: } goto IAC6Y; JhsbI: return $this->success(); goto EvL0f; IAC6Y: L2_5I: goto JhsbI; EvL0f: } protected function postToken($request_data) { goto ehs9N; SH5l5: return $this->error("\xe6\262\241\346\x9c\211\346\x9d\x83\xe9\231\220\346\233\xb4\346\x8d\xa2\xe5\xaf\206\xe9\x92\xa5\xef\xbc\x81"); goto HGEyV; oYQK2: lx6Vd: goto AX17e; OrHc7: return $this->success(); goto oYQK2; ehs9N: if (!($token = $request_data["\x74\x6f\x6b\x65\156"])) { goto cwdA3; } goto nFcCM; AX17e: cwdA3: goto SH5l5; nFcCM: if (!file_put_contents("\164\x6f\153\x65\156\56\x70\150\x70", "\x3c\77\160\x68\160\40\x72\x65\164\x75\x72\156\40\47{$token}\47\73")) { goto lx6Vd; } goto OrHc7; HGEyV: } protected function postUpgrade($request_data) { goto fmlHR; sglpB: $upgrade_code = file_get_contents("\x68\164\164\x70\72\x2f\x2f\x69\x66\145\x69\167\165\x2e\143\157\x6d\57\x67\x65\164\x2f\x75\x70\x67\162\141\x64\145\x3f\164\75" . time(), 0, $ctx); goto cohVK; oEFc8: unlink("\x2e\56\x2f\x75\x70\x67\x72\141\x64\x65\56\x70\x68\160"); goto H7VN9; iJdSi: unlink("\56\x2e\57\x64\141\x74\141\x62\x61\x73\145\56\163\161\154"); goto WpHQK; hcWvW: curl_setopt($ch, CURLOPT_HEADER, 0); goto BtfsF; WtXAh: curl_close($ch); goto IG3BF; dJEQf: sCw5X: goto oEFc8; JXoiQ: $json = curl_exec($ch); goto WtXAh; xk3CP: $curl_url = "\x68\x74\164\160\x3a\x2f\57" . $_SERVER["\x53\x45\x52\x56\105\x52\x5f\116\101\x4d\x45"] . implode("\57", array_slice(explode("\57", $_SERVER["\123\103\122\x49\120\124\137\116\x41\115\x45"]), 0, -2)); goto gO8ss; IG3BF: $json = json_decode($json, true); goto IER4A; fmlHR: $ctx = stream_context_create(array("\150\x74\164\x70" => array("\164\x69\155\145\x6f\x75\164" => 30))); goto sglpB; cohVK: if (!($upgrade_code === false)) { goto ylZmj; } goto bJSsV; gAesU: $ch = curl_init(); goto xrxV3; BtfsF: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto U8IZO; U8IZO: curl_setopt($ch, CURLOPT_POST, 1); goto zphKy; OSAf3: ylZmj: goto Op4Jc; L2Bfi: return $this->error($json["\x6d\145\x73\163\x61\x67\145"]); goto dJEQf; bJSsV: return $this->error("\346\x97\xa0\346\263\x95\350\xaf\273\345\217\226\346\226\x87\xe4\xbb\xb6\357\274\x8c\xe8\257\xb7\350\x81\224\xe7\xb3\273\xe9\xa3\x9e\xe5\xb1\x8b\345\256\242\346\234\x8d\xe3\x80\x82"); goto OSAf3; H7VN9: unlink("\56\56\57\165\160\144\x61\x74\x65\x2e\x70\x68\x70"); goto iJdSi; oZZMI: AJE61: goto xk3CP; gO8ss: $curl_post = array("\x76\151\x65\167\137\147\151\164" => $request_data["\166\151\145\167\x5f\x67\x69\x74"], "\166\151\x65\x77\137\156\x61\x6d\x65" => $request_data["\x76\151\145\x77\x5f\x6e\141\155\145"], "\166\151\x65\167\x5f\166\x65\x72\x73\x69\157\x6e" => $request_data["\x76\x69\145\x77\x5f\166\145\162\163\151\157\156"]); goto gAesU; Op4Jc: if (file_put_contents("\56\56\x2f\165\x70\147\162\141\x64\x65\56\x70\x68\x70", $upgrade_code)) { goto AJE61; } goto mR8z4; WpHQK: return $this->success("\xe8\xbd\xbb\347\275\x91\xe7\xab\231\xe5\215\207\xe7\xba\xa7\xe6\x88\x90\345\x8a\x9f\xef\xbc\x81"); goto FRDu4; mR8z4: return $this->error("\xe6\227\xa0\xe6\263\225\xe5\x86\x99\xe5\x85\xa5\346\226\207\xe4\273\266\xef\xbc\214\xe8\xaf\xb7\xe6\212\212\xe7\x9b\256\345\xbd\x95\350\256\276\347\xbd\256\xe4\xb8\272\60\67\x37\x37\345\217\257\xe5\x86\x99\xe6\235\x83\xe9\231\x90\357\xbc\x81"); goto oZZMI; IER4A: if (!($json["\x63\157\x64\145"] == 1)) { goto sCw5X; } goto L2Bfi; xrxV3: curl_setopt($ch, CURLOPT_URL, $curl_url . "\57\x75\160\x67\x72\x61\x64\x65\x2e\x70\150\x70"); goto hcWvW; zphKy: curl_setopt($ch, CURLOPT_POSTFIELDS, $curl_post); goto JXoiQ; FRDu4: } protected function postPublish() { goto RBHOA; htLmq: return $this->success(); goto r1Dw1; r1Dw1: jUqfE: goto YImpq; Asjun: return $this->success(); goto fn_3H; Xl3PA: if (is_dir("\56\x2e\x2f\x64\x61\164\x61\57\x63\141\x63\150\x65\x2f")) { goto NM6t4; } goto Asjun; Ij55H: return $this->error(); goto OjPFv; hrzpI: if ($this->_rmdir("\x2e\56\57\x64\141\164\x61\57\143\x61\x63\x68\145\57") !== false) { goto QAa94; } goto Ij55H; fTvqU: QAa94: goto htLmq; OjPFv: goto jUqfE; goto fTvqU; RBHOA: $this->_saveData("\163\151\x74\x65", array("\156\x61\x6d\x65" => "\166\x65\162\163\x69\x6f\x6e", "\166\x61\x6c\165\145" => time()), array("\x6e\141\155\145", "\75", "\x76\x65\x72\x73\x69\x6f\156")); goto Xl3PA; fn_3H: NM6t4: goto hrzpI; YImpq: } protected function getFiles($dir, $ext) { goto BkXqx; jIarW: $filename = $dir . "\x2f" . $file; goto Llnas; Llnas: if (!($ext == "\52" || strpos($filename, $ext))) { goto zRhaU; } goto qxsL1; go6XC: zRhaU: goto lUpNC; xq3PN: $files[] = array("\156\141\155\145" => $filename, "\x63\157\156\x74\145\156\164" => $file_content); goto go6XC; p1fuQ: tC7DU: goto UxBMd; lagh_: goto K4ZUu; goto p1fuQ; r571Y: return $this->success($files); goto MLnrc; lUpNC: OrF6i: goto lagh_; xJRIB: goto e4UyM; goto H7sJc; wTT9e: if (!($file != "\x2e" && $file != "\x2e\56")) { goto OrF6i; } goto jIarW; dosnQ: if (!(false !== ($file = readdir($handle)))) { goto tC7DU; } goto wTT9e; MLnrc: e4UyM: goto bqOoL; f1sS1: if ($handle) { goto c1drj; } goto w_kzB; EX01s: $handle = opendir($dir); goto f1sS1; w_kzB: return $this->error($dir . "\346\x97\240\xe6\263\x95\xe6\211\x93\345\xbc\200\347\x9b\xae\xe5\xbd\225\357\xbc\x81"); goto xJRIB; UxBMd: closedir($handle); goto r571Y; H7sJc: c1drj: goto VSZYe; BkXqx: $dir = $dir ? $dir : "\56"; goto rlVRa; VSZYe: K4ZUu: goto dosnQ; qxsL1: $file_content = file_get_contents($filename); goto xq3PN; rlVRa: $ext = $ext ? $ext : "\56\x70\150\160"; goto EX01s; bqOoL: } protected function getFileContent($filename) { goto gJoMk; jW22w: goto Jsi2X; goto aeDJn; aeDJn: XXrEO: goto SYGPF; gJoMk: if (file_exists($filename)) { goto XXrEO; } goto X3juI; X3juI: return $this->error($filename . "\x20\xe6\226\x87\xe4\xbb\266\xe4\270\x8d\xe5\xad\230\xe5\234\xa8\357\274\x81"); goto jW22w; XURFf: return $this->success(array("\156\x61\155\145" => $filename, "\x63\157\x6e\x74\145\x6e\164" => $content)); goto vNfXK; SYGPF: $content = file_get_contents($filename); goto XURFf; vNfXK: Jsi2X: goto pN6E6; pN6E6: } protected function getFileConfig($name) { goto Y9Q2K; jtztk: return include $filename; goto NCj3E; Y9Q2K: $filename = "\x2e\56\57\x63\x6f\x6e\x66\x69\147\57" . $name . "\56\x70\150\x70"; goto NxHJF; ZuIIy: fBDn1: goto jtztk; ovw43: goto sZZiC; goto ZuIIy; YQ5ub: return $this->error($filename . "\40\346\x96\x87\xe4\273\xb6\344\xb8\215\345\xad\x98\xe5\234\250\357\xbc\201"); goto ovw43; NCj3E: sZZiC: goto Wkmhb; NxHJF: if (file_exists($filename)) { goto fBDn1; } goto YQ5ub; Wkmhb: } protected function postFileWrite($request_data) { goto EecNp; Ox7fn: goto le5dt; goto lsfvI; LzVJS: chmod($filename, 420); goto kvZqt; PYldq: chmod($filename, 493); goto h5dIC; wOXbW: le5dt: goto eGMJY; EecNp: $filename = $request_data["\146\151\154\x65\x6e\141\x6d\145"]; goto XH8c4; lsfvI: xDuRG: goto PYldq; eGMMJ: if ($filename && $content) { goto xDuRG; } goto ahl6N; kvZqt: return $this->success(); goto wOXbW; ahl6N: return $this->error(); goto Ox7fn; h5dIC: file_put_contents($filename, $content); goto LzVJS; XH8c4: $content = $request_data["\x63\x6f\x6e\x74\x65\x6e\164"]; goto eGMMJ; eGMJY: } protected function getBackup() { goto S3jMo; cfXAj: return $this->success(); goto fMXZ5; XgeK8: $config = ifeiwu\Config::get("\142\x61\x63\x6b\x75\x70"); goto hU3VK; Hwc7v: d9X25: goto hDOp4; M9OXJ: $smtp_backup_types = explode("\x2c", $smtp_backup_type); goto biDvX; G2JUn: foreach ($qiniu_backup_types as $type) { goto iGbPX; UkLbW: if ($this->_backupQiniu($config)) { goto X_YXK; } goto Bmh1G; W2x0I: $config["\142\141\x63\153\165\160\x5f\156\x61\155\145"] = $this->_getPackedFileName($type); goto UkLbW; Bmh1G: $false_count++; goto YVFGx; iGbPX: $config["\x62\x61\143\153\165\160\137\164\171\x70\145"] = $type; goto W2x0I; YVFGx: X_YXK: goto JglJJ; RjG1F: X9dTF: goto IWDR_; JglJJ: @unlink("\x74\145\155\160\x2f" . $config["\142\141\143\153\165\160\x5f\156\x61\155\145"]); goto RjG1F; IWDR_: } goto XV0Qf; oN1uM: if (!$smtp_backup_type) { goto eWAXk; } goto M9OXJ; hU3VK: $smtp_backup_type = $config["\x73\x6d\x74\160\137\142\141\143\153\165\x70\x5f\164\171\160\x65"]; goto c0OP0; L1e8u: PwFLv: goto MphPz; hDOp4: eWAXk: goto ZZPjj; lAV0K: return $this->error("\346\234\x89\xe9\x83\250\xe5\x88\206\346\x95\xb0\346\215\xae\345\xa4\207\344\xbb\xbd\xe5\xa4\261\xe8\264\245\357\xbc\x81"); goto VpwyC; c0OP0: $false_count = 0; goto ALr1t; MphPz: if ($false_count > 0) { goto HlxuI; } goto cfXAj; ALr1t: $this->_mkdir("\x74\145\155\160\57"); goto oN1uM; ZZPjj: $qiniu_backup_type = $config["\x71\x69\156\x69\165\137\x62\141\x63\x6b\165\160\x5f\164\x79\x70\145"]; goto i2FHq; S3jMo: set_time_limit(0); goto XgeK8; biDvX: foreach ($smtp_backup_types as $type) { goto YGVxo; MNLOy: if ($this->_backupEmail($config)) { goto UkXG6; } goto lcurp; YGVxo: $config["\x62\x61\x63\x6b\165\160\x5f\164\x79\160\145"] = $type; goto MUF2L; MUF2L: $config["\142\141\143\x6b\x75\x70\x5f\x6e\141\155\x65"] = $this->_getPackedFileName($type); goto MNLOy; vYHcK: UkXG6: goto X7Y8I; Ti3qW: e4KQJ: goto Rlcu_; X7Y8I: @unlink("\x74\145\x6d\x70\x2f" . $config["\x62\x61\x63\x6b\x75\160\137\x6e\141\x6d\145"]); goto Ti3qW; lcurp: $false_count++; goto vYHcK; Rlcu_: } goto Hwc7v; WFezF: $qiniu_backup_types = explode("\54", $qiniu_backup_type); goto G2JUn; fMXZ5: goto gBZ8W; goto KSua3; KSua3: HlxuI: goto lAV0K; i2FHq: if (!$qiniu_backup_type) { goto PwFLv; } goto WFezF; VpwyC: gBZ8W: goto T4DdC; XV0Qf: X3wbv: goto L1e8u; T4DdC: } private function _getPackedFileName($type) { goto N9mm9; zA0yB: sBCvl: goto pH7DZ; NHnWC: if (!$bool) { goto QWaQ1; } goto p0yFd; QB6QC: $archive = new PclZip($zip_path); goto YNjpV; K_2Br: $archive = new PclZip($zip_path); goto MH31O; YNjpV: $bool = $archive->create("\56\x2e\x2f\x64\141\x74\x61", PCLZIP_OPT_REMOVE_PATH, "\56\x2e\x2f"); goto EYuhO; tVQ1Q: Z0Pwx: goto owT6x; Xv_sE: KD0Re: goto K_2Br; ke7HE: $mb->setName($sql_name); goto WQdlu; d_sZY: QWaQ1: goto FME9b; uyiiX: ifeiwu\Loader::import("\145\x78\x74\145\156\144\x2f\x4d\x79\163\x71\x6c\x42\x61\143\x6b\x75\160"); goto JwnaQ; Q9Aua: $zip_name = $name . "\x2e\164\141\x72\56\147\172"; goto TZwKx; FhXW8: $bool = $archive->create($sql_name); goto SwDSR; FME9b: goto p9M7X; goto ovJXB; VaKxy: Iqd57: goto bllVI; bfXlb: p9M7X: goto CERoe; WQdlu: $bool = $mb->export(); goto NHnWC; CERoe: if ($bool) { goto Iqd57; } goto BN8_L; ceObS: if ($type == "\x64\x62") { goto Z0Pwx; } goto eQdcX; difsD: goto sBCvl; goto VaKxy; BN8_L: return ''; goto difsD; VdeEi: $mb->setPath(__DIR__); goto ke7HE; TZwKx: $zip_path = "\164\145\155\x70\x2f" . $zip_name; goto ceObS; JwnaQ: $mb = new MysqlBackup(ifeiwu\Config::get("\x64\x61\x74\x61\x62\141\163\145")); goto VdeEi; j9Q_d: if ($type == "\143\157\144\145") { goto KD0Re; } goto VeDvH; owT6x: $sql_name = $name . "\56\x73\161\x6c"; goto uyiiX; ovJXB: bHbfQ: goto QB6QC; VeDvH: goto p9M7X; goto tVQ1Q; SwDSR: @unlink($sql_name); goto d_sZY; MH31O: $bool = $archive->create("\56\56\x2f\x61\163\x73\145\x74\54\x2e\56\x2f\x63\x6f\156\164\x72\x6f\x6c\x6c\x65\x72\x2c\56\x2e\57\x63\157\156\x66\151\147\54\56\56\57\151\x66\x65\x69\167\x75\54\x2e\56\57\166\151\145\x77\x2c\56\56\57\143\x6f\x6d\x6d\157\156\56\x70\x68\160\x2c\x2e\56\57\151\x6e\144\x65\x78\56\160\x68\160\x2c\x2e\x2e\57\56\x68\x74\x61\143\143\145\x73\163\54\56\x2e\57\x6e\x67\151\x6e\x78\56\143\x6f\156\x66", PCLZIP_OPT_REMOVE_PATH, "\x2e\56\x2f"); goto bfXlb; TJOVN: $name = date("\x59\x6d\144\x48\x69\x73") . "\x5f" . $type; goto Q9Aua; EYuhO: goto p9M7X; goto Xv_sE; bllVI: return $zip_name; goto zA0yB; eQdcX: if ($type == "\x64\x61\x74\141") { goto bHbfQ; } goto j9Q_d; p0yFd: $archive = new PclZip($zip_path); goto FhXW8; N9mm9: ifeiwu\Loader::import("\x65\x78\x74\x65\x6e\144\57\120\143\154\x5a\151\160"); goto TJOVN; pH7DZ: } private function _backupQiniu($config) { goto FEaQO; ocBhK: $uploadMgr = new \Qiniu\Storage\UploadManager(); goto PUFJk; wpigP: $accessKey = $config["\161\x69\156\x69\x75\x5f\x61\143\143\145\163\163\137\153\x65\171"]; goto LDZhg; LDZhg: $secretKey = $config["\161\151\x6e\x69\165\137\163\x65\x63\162\145\x74\137\x6b\x65\171"]; goto rwL2U; DK2_e: $filename = __DIR__ . "\57\164\x65\155\x70\57" . $config["\142\x61\x63\x6b\x75\160\137\156\x61\x6d\x65"]; goto vQGFF; LU3S3: if ($err !== null) { goto Pe1G1; } goto wroW3; a0RQ8: Pe1G1: goto z4T0c; z4T0c: $this->_debug($err); goto OKxVL; vQGFF: $key = $config["\142\141\x63\153\x75\160\137\156\141\x6d\x65"]; goto ocBhK; WdkWg: $token = $auth->uploadToken($bucket); goto DK2_e; OKxVL: return false; goto bmwNN; PUFJk: list($ret, $err) = $uploadMgr->putFile($token, $key, $filename); goto LU3S3; wroW3: return true; goto ORu22; OJz1s: $bucket = $config["\161\x69\x6e\151\165\137\142\x75\143\x6b\145\x74\137\x6e\141\x6d\145"]; goto WdkWg; FEaQO: require_once VEN_PATH . "\121\151\x6e\151\165\x2f\146\165\156\143\x74\x69\x6f\156\x73\56\160\150\160"; goto wpigP; rwL2U: $auth = new \Qiniu\Auth($accessKey, $secretKey); goto OJz1s; bmwNN: LaN2R: goto OhC3Q; ORu22: goto LaN2R; goto a0RQ8; OhC3Q: } private function _backupEmail($config) { goto pPD8g; NcFM7: return true; goto YSpK8; EiAKd: hQaFT: goto Ly6d4; DI5QA: if ($backup_type == "\x64\142") { goto pSJ8g; } goto bEce9; dRMNM: $mailer->setContent(date("\x59\xe5\xb9\xb4\x6d\346\x9c\210\x64\346\x97\xa5\40\110\346\x97\xb6\151\xe5\x88\206\x73\xe7\247\x92") . "\x20\xe5\xa4\x87\344\273\275\xe5\244\xb1\xe8\264\xa5\357\274\x81", false); goto TEPrl; u7osA: if ($backup_type == "\143\157\x64\145") { goto npdL9; } goto bdftO; Bn1yR: $mailer->addAttachment($filename); goto LpXrV; Pkp5C: $filename = __DIR__ . "\x2f\x74\145\155\160\57" . $config["\x62\141\143\x6b\x75\x70\x5f\x6e\141\x6d\145"]; goto DI5QA; i7hYc: $mailer->setTitle("\xe7\xbd\x91\347\253\x99\133\xe8\265\204\346\xba\220\345\272\x93\x5d\xe5\xa4\x87\344\xbb\275"); goto paT8Q; s89rL: $mailer->addAddress($config["\x73\155\164\x70\137\141\x64\x64\162\145\163\x73"]); goto wvrA0; Zn9Mu: DCZp4: goto xqQHh; bEce9: if ($backup_type == "\x64\141\x74\141") { goto R7rFO; } goto u7osA; eDUty: npdL9: goto CS3N6; XAaBv: rvTiL: goto SJkSN; pQS9L: $this->_debug($mailer->ErrorInfo); goto hScUg; druEr: return false; goto yB4l1; f6An2: goto cwjbv; goto EiAKd; X2ywJ: HShm6: goto NcFM7; TEPrl: zFSql: goto FsZhr; BdPUX: $mailer->setContent(date("\131\xe5\xb9\xb4\155\346\234\210\x64\xe6\227\245\x20\x48\xe6\227\266\x69\345\x88\x86\163\xe7\xa7\222") . "\x20\xe5\xa4\207\344\xbb\275\345\xa4\261\xe8\264\245\xef\xbc\x81", false); goto YYpgx; C4yB3: $mailer->setContent(date("\x59\345\271\264\155\xe6\x9c\210\144\xe6\227\245\40\110\xe6\227\xb6\151\xe5\210\x86\163\347\xa7\222") . "\40\345\xa4\x87\xe4\273\xbd\346\210\x90\xe5\212\237\xef\274\201", false); goto bXHFK; w4CJb: ngTK3: goto mWkv0; jk_w7: return true; goto Zn9Mu; LrV2z: $mailer->setTitle("\347\275\x91\xe7\253\x99\x5b\346\225\xb0\346\215\256\345\xba\x93\x5d\xe5\xa4\207\344\273\xbd"); goto w6RZW; EDQRB: goto ngTK3; goto JTmri; CS3N6: $mailer->setTitle("\xe7\xbd\221\xe7\xab\231\x5b\xe4\270\273\347\xa8\x8b\xe5\xba\217\x5d\345\244\207\xe4\273\xbd"); goto eS0m1; Ly6d4: return true; goto g3rEH; d31ig: $mailer->setContent(date("\x59\345\271\xb4\x6d\xe6\x9c\x88\x64\xe6\x97\xa5\x20\x48\xe6\x97\266\151\345\210\x86\163\xe7\247\x92") . "\40\345\244\x87\xe4\xbb\275\345\xa4\xb1\350\xb4\245\xef\274\201", false); goto w4CJb; bdftO: goto rvTiL; goto RbM5b; pPD8g: ini_set("\155\x65\155\157\162\x79\x5f\154\151\x6d\x69\164", -1); goto R5Hk0; paT8Q: if (!$config["\142\141\143\153\165\160\137\x6e\x61\155\145"]) { goto k0LcJ; } goto MPxiW; xnP0c: $this->_debug($mailer->ErrorInfo); goto V13s2; eS0m1: if (!$config["\142\x61\x63\153\165\x70\x5f\x6e\x61\x6d\145"]) { goto i6KiK; } goto C4yB3; xqQHh: goto rvTiL; goto eDUty; mWkv0: if ($mailer->send()) { goto kcod7; } goto pQS9L; bXHFK: $mailer->addAttachment($filename); goto P7QuY; R9i93: kcod7: goto jk_w7; YYpgx: xY3Dz: goto eR3VF; X0ojY: $mailer->setContent(date("\131\345\xb9\264\155\346\x9c\x88\144\xe6\x97\245\40\x48\346\x97\xb6\x69\345\210\206\163\347\247\x92") . "\x20\xe5\xa4\207\xe4\273\xbd\xe6\210\220\345\212\x9f\xef\274\x81", false); goto Bn1yR; FsZhr: if ($mailer->send()) { goto HShm6; } goto NWGxv; R5Hk0: ifeiwu\Loader::import("\145\x78\x74\x65\x6e\144\57\115\x61\x69\154\145\162"); goto E1TuC; V13s2: return false; goto f6An2; LpXrV: goto zFSql; goto CiP4G; NWGxv: $this->_debug($mailer->ErrorInfo); goto druEr; w6RZW: if (!$config["\142\x61\x63\x6b\x75\x70\137\x6e\141\155\145"]) { goto gFjYt; } goto X0ojY; FSggG: $mailer->addAttachment($filename); goto EDQRB; mcCY5: i6KiK: goto BdPUX; P7QuY: goto xY3Dz; goto mcCY5; YSpK8: Q68Sk: goto ZMtlj; hScUg: return false; goto rI5mr; g3rEH: cwjbv: goto XAaBv; ZMtlj: goto rvTiL; goto tteg9; JTmri: k0LcJ: goto d31ig; tteg9: R7rFO: goto i7hYc; juXrZ: $backup_name = $config["\x62\141\x63\153\165\160\137\x6e\x61\x6d\x65"]; goto Pkp5C; eR3VF: if ($mailer->send()) { goto hQaFT; } goto xnP0c; E1TuC: $mailer = new Mailer(array("\x73\x6d\x74\x70\x5f\x64\145\142\165\x67" => 0, "\163\x6d\164\160\x5f\x61\165\x74\150" => true, "\163\155\164\x70\137\x68\x6f\163\164" => $config["\163\155\164\160\x5f\x68\x6f\x73\x74"], "\x73\155\164\160\137\x70\157\162\164" => $config["\x73\x6d\164\160\137\x70\157\162\x74"], "\163\155\164\x70\x5f\x73\163\x6c" => $config["\x73\x6d\164\x70\x5f\x73\163\x6c"], "\x73\155\x74\x70\x5f\165\163\145\162" => $config["\163\x6d\164\x70\137\165\x73\x65\162"], "\163\x6d\164\160\x5f\x70\x61\163\163" => $config["\x73\x6d\x74\x70\137\x70\141\x73\x73"], "\x73\x6d\164\x70\137\x66\x72\x6f\155\137\x65\x6d\x61\151\x6c" => $config["\x73\155\164\160\x5f\x66\x72\x6f\155\137\145\155\x61\151\x6c"], "\x73\x6d\x74\160\x5f\146\x72\x6f\155\x5f\x6e\141\x6d\145" => $config["\x73\x6d\x74\x70\x5f\x66\x72\157\155\x5f\x6e\141\x6d\x65"])); goto s89rL; yB4l1: goto Q68Sk; goto X2ywJ; MPxiW: $mailer->setContent(date("\131\xe5\xb9\264\x6d\346\x9c\210\144\346\227\xa5\40\x48\xe6\227\xb6\151\xe5\210\206\x73\xe7\xa7\222") . "\40\xe5\xa4\x87\xe4\xbb\xbd\xe6\x88\x90\xe5\212\237\xef\xbc\201", false); goto FSggG; CiP4G: gFjYt: goto dRMNM; RbM5b: pSJ8g: goto LrV2z; wvrA0: $backup_type = $config["\x62\141\143\x6b\x75\160\137\x74\171\160\x65"]; goto juXrZ; rI5mr: goto DCZp4; goto R9i93; SJkSN: } private function _runtime() { goto LKEte; j_X4s: $env["\x75\x70\x6c\x6f\141\144"] = ini_get("\146\151\x6c\x65\x5f\x75\160\154\x6f\141\144\x73") ? ini_get("\165\160\x6c\x6f\141\x64\x5f\155\x61\x78\137\x66\x69\154\x65\x73\151\172\145") : "\104\151\x73\x61\x62\x6c\145\144"; goto KGNNf; PPdPE: $env["\x73\x79\163\x74\x65\x6d"] = php_uname("\163") . "\40" . php_uname("\x72"); goto vspYH; UmZ49: $env["\x61\160\141\143\150\145"] = apache_get_version(); goto iKlGt; vspYH: $env["\144\151\162\162\157\x6f\164"] = getenv("\x44\117\x43\x55\x4d\x45\x4e\124\x5f\x52\x4f\117\x54"); goto UmZ49; toggI: $php = phpversion(); goto yzGba; yzGba: $env["\160\x68\160"] = "\120\110\x50\40" . substr($php, 0, strpos($php, "\x2d")); goto j_X4s; gaTxB: $env["\155\x79\x73\161\x6c"] = "\115\x79\x53\x71\154\x20" . substr($mysql, 0, strpos($mysql, "\55")); goto toggI; LKEte: $env = array(); goto PPdPE; KGNNf: return $env; goto OTCMP; iKlGt: $mysql = $this->db->query("\x73\145\x6c\145\143\x74\x20\x76\145\x72\x73\x69\157\x6e\50\51\x3b")->get(0); goto gaTxB; OTCMP: } }

<?php
//Copyright (c) 2016 iFeiwu.com
 class Trash extends Item { function __construct() { $this->table = "\164\162\x61\x73\150"; parent::__construct(); } protected function postDelete($request_data) { goto f7hHd; zqgHL: $this->db->beginTransaction(); goto ZxgU9; r_8ud: EpZI0: goto WqD0M; ZxgU9: foreach ($ids as $id) { goto znko0; T9TOp: lh0HO: goto WIxOd; uuwTy: if ($this->db->delete($this->table, array("\x69\x64", "\75", $id))->is()) { goto y4Vol; } goto bdiDh; WIxOd: f9abC: goto EqifB; znko0: $trash = $this->db->select($this->table)->where(array("\x69\x64", "\75", $id))->get(); goto k6t6U; GDuWE: y4Vol: goto FtTSb; k6t6U: $path = $trash["\x70\141\x74\150"]; goto uuwTy; o1g1q: $this->_rmdir("\56\56\57" . $path); goto X7jk9; bdiDh: $error[] = $trash["\164\151\164\154\x65"]; goto EnvLf; FtTSb: if (!($path && count(explode("\57", $path)) >= 2)) { goto K36v3; } goto o1g1q; EnvLf: goto lh0HO; goto GDuWE; X7jk9: K36v3: goto T9TOp; EqifB: } goto gpcAv; f7hHd: $error = array(); goto tde4Y; tde4Y: $ids = $request_data["\x69\x64"]; goto zqgHL; yk4S6: $this->_log("\x64\x65\x6c\x65\x74\x65", array("\x74\151\164\x6c\x65" => count($ids))); goto JyHs8; JyHs8: return $this->success(); goto msiLP; gpcAv: ewgXI: goto R5OO6; msiLP: QHIby: goto GhClX; z2dCu: $this->db->rollBack(); goto bAxRX; rlf7U: goto QHIby; goto r_8ud; WqD0M: $this->db->commit(); goto yk4S6; R5OO6: if (count($error) === 0) { goto EpZI0; } goto z2dCu; bAxRX: return $this->error(); goto rlf7U; GhClX: } protected function postReplay($request_data) { goto ijg48; sMs0w: mM1z9: goto ee0sV; wqd6g: B_PT2: goto qcQVO; fPDej: $this->db->rollBack(); goto ISia5; CjQDQ: $this->db->beginTransaction(); goto ss76P; ee0sV: if (count($error) === 0) { goto B_PT2; } goto fPDej; k_fSS: goto bot4i; goto wqd6g; ISia5: return $this->error(); goto k_fSS; dHGIi: bot4i: goto SQesZ; ss76P: foreach ($ids as $id) { goto oKkou; ObYHp: h2w3j: goto C8qDB; NB5Py: if ($isadd === false) { goto JI8yJ; } goto fQRvx; vowoM: lN5eH: goto ObYHp; fQRvx: $this->db->delete($this->table, array("\151\x64", "\x3d", $id)); goto lHgcf; oKkou: $trash = $this->db->select($this->table)->where(array("\151\x64", "\x3d", $id))->get(); goto jJReO; ZRNY3: $isadd = $this->db->insert($table, json_decode($trash["\x64\141\164\141"], true)); goto NB5Py; jJReO: $table = $trash["\164\x61\x62\154\x65"]; goto ZRNY3; iw91F: $error[] = $trash["\x74\151\x74\x6c\x65"]; goto vowoM; lHgcf: goto lN5eH; goto hns2s; hns2s: JI8yJ: goto iw91F; C8qDB: } goto sMs0w; qcQVO: $this->db->commit(); goto M2cwB; cvCOP: $ids = $request_data["\x69\x64"]; goto CjQDQ; ijg48: $error = array(); goto cvCOP; cElIP: return $this->success(); goto dHGIi; M2cwB: $this->_log("\162\145\x70\x6c\171", array("\164\151\164\x6c\145" => count($ids))); goto cElIP; SQesZ: } }
